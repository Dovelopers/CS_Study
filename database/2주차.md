# 데이터베이스 CS 스터디 2주차

데이터베이스 2주차 스터디입니다.

한빛아카데미의 `MySQL로 배우는 데이터베이스 개론과 실습` 책을 기반으로 작성했습니다.

작성자 : YMGYM(안민준)



## 관계 데이터 모델

관계 데이터 모델은 1970년대에 제안되었습니다.

이 모델은 수학의 집합이론에 근거하고 있어 다른 모델 구조보다 튼튼한 이론적 토대를 가지고 있습니다.

관계 데이터 모델은 데이터를 테이블(집합) 단위로 처리하여 쉽게 접근할 수 있습니다.



## 릴레이션

릴레이션은 '행과 열로 구성된 테이블'을 의미합니다. (테이블이 릴레이션의 가장 효과적인 시각적 표현 방법이라고 제시합니다.)

릴레이션은 집합의 개념입니다. 따라서  속성이나 인스턴스의 중복을 허용하지 않습니다.

릴레이션을 이해하려면 관계에 대한 개념을 이해해야 합니다.



첫 번째 관계는 '릴레이션 내에서 생성되는 관계'입니다.

예를 들어 다음 데이터가 있는 경우

- 도서번호 = {1,2,3,4,5}

- 도서이름 = {축구의 역사, 축구아는 여자, 축구의 이해, 골프 바이블, 피겨 교본}

- 가격 = {7000, 13000, 22000, 35000, 8000}



이 때 (1, 축구의 역사, 7000)는 각각 원소 한 개씩이 '관계'를 맺고 있습니다.

릴레이션의 경우 이런 관계들의 집합이라고 볼 수 있습니다.



두 번째 관계는 '릴레이션 간의 관계' 입니다.

한 릴레이션에서 다른 릴레이션으로 식별 가능한 값으로 연결합니다.

이 점이 관계 데이터베이스가 다른 데이터베이스와 구분되는 특징입니다.



## 릴레이션 스키마와 인스턴스

릴레이션은 스키마와 인스턴스로 구성됩니다.

![](https://t1.daumcdn.net/cfile/tistory/997A69335A0AD58501)

출처 : [[Database] 2. 관계데이터모델 - MangKyu's Diary](https://mangkyu.tistory.com/21)

### 스키마

릴레이션에 어떤 정보가 담길지를 정의합니다.

- 속성 : 릴레이션 스키마의 열

- 도메인 : 속성이 가질 수 있는 값의 집합

- 차수 : 속성의 개수

도서 릴레이션 스키마는 다음과 같이 표현할 수 있습니다.

도서(도서번호, 도서이름, 출판사, 가격)



### 인스턴스

릴레이션 스키마에 실제로 저장된 데이터의 집합

- 투플 : 릴레이션의 행

- 카디날리티 : 투플의 수



## 릴레이션의 특징

![](https://t1.daumcdn.net/cfile/tistory/99C63F335A0ADB2411)

출처 : [[Database] 2. 관계데이터모델 - MangKyu's Diary](https://mangkyu.tistory.com/21)



릴레이션은 대부분 수학적 표기법을 따릅니다. 따라서 집합의 개념에서 가져온 특징들이 있습니다.

- 속성은 단일 값만을 가진다 : 하나의 투플에 가질 수 있는 속성은 하나 뿐이다.

- 속성은 서로 다른 이름을 가진다 : 이름의 중복이 있을 수 없습니다.

- 한 속성의 값은 모두 같은 도메인 값을 가진다 : 즉 자료형이 같다와 비슷한 표현입니다

- 속성의 순서는 상관 없다 : (주소, 이름) 이나 (이름, 주소) 나 같은 릴레이션 스키마 입니다.

- 릴레이션 내의 중복된 투플은 허용하지 않는다 : 모든 투플은 서로 값이 달라야 합니다.

- 투플의 순서는 상관 없다 : 수정, 삭제에 따라 순서가 바뀔수 있습니다.



## 관계 데이터 모델

관계 데이터 모델은 데이터를 릴레이션 형태 (2차원 테이블)로 표현합니다.

이에 더해 제약조건과 관계 연산을 위한 관계대수를 정의합니다.

- 제약조건 : 릴레이션에 저장된 데이터 값이 가져야 하는 제약

- 관계 연산 : 릴레이션을 다루는 연산 규칙 (후에 다룸)

관계 데이터 모델을 컴퓨터 시스템에 구현한 것을 관계 데이터베이스 시스템이라고 합니다.

데이터베이스 시스템에서는 모든 작업들을 SQL로 사용해서 하게 됩니다.



## 무결성 제약조건

데이터베이스는 일관성을 유지하고 중복을 제거하는 등의 신뢰도를 유지해야 합니다. 이를 위해 무결성 제약조건을 정하게 됩니다.



### 키

키는 릴레이션에서 특정 튜플을 식별할 때 사용하는 속성/속성의 집합입니다.

키는 관계 데이터베이스에서 데이터의 사용과 관계 표현에 중요한 개념입니다.

릴레이션의 중복을 제거하는 데 핵심적인 역할이며, 이를 위해 반드시 값이 달라야 합니다.



### 슈퍼키

튜플을 유일하게 식별할 수 있는 속성 한 개 또는 속성의 집합입니다.

슈퍼키는 포함하지 않아도 되는 값을 포함하고, 슈퍼키들의 집합 또한 슈퍼키일 수 있습니다.

예를 들어 (주민번호), (주민번호, 이름, 주소) 모두 슈퍼키가 될 수 있습니다.



### 후보키

튜플을 유일하게 식별할 수 있는 속성의 **최소 집합**입니다.

없어도 되는 속성을 포함하고 있으면 **최소 집합** 은 아니기 때문에 아닙니다.

예를 들어 (주민번호, 이름, 주소) 는 이름과 주소는 없어도 개인을 식별하는 데 문제가 없으므로 후보키가 될 수 없습니다.



### 기본키 (PK)

기본키는 여러 후보키 중 하나를 선정하여 대표로 삼는 키를 말합니다.

기본키를 선택할 때는 아래와 같은 것들을 고려할 필요가 있습니다.

- 튜플을 식별할 수 있는 고유한 값을 가져야 한다.

- NULL 값을 허용하지 않는다.

- 키 값의 변동이 일어나지 않아야 한다

- 최대한 적은 수의 속성을 가져야 한다.

- 향후 키를 사용하는 데 있어서 문제 발생 소지가 없어야 한다.

기본키는 릴레이션 스키마에서 (<u>고객번호</u>, 이름, 주소) 처럼 밑줄을 그어 표시합니다.



### 대리키

마땅한 기본키가 없을 때나 기본키가 여러 개의 속성으로 구성되어 복잡한 경우에는 가상의 속성을 만들어 기본키로 삼기도 합니다. 이를 대리키라고 합니다.

예를 들어 주문 테이블을 사용할 때 (<u>고객번호, 상품번호</u>) 를 기본키로 삼으면 매우 복잡하기 때문에 (<u>주문번호</u>, 고객번호, 상품번호) 를 사용하기도 합니다.



### 대체키

기본키로 선정되지 않은 후보키를 말합니다.



### 외래키

다른 릴레이션의 기본키를 참조하는 속성을 말합니다.

예를 들어 주문 정보를 저장할 때 (<u>주문번호</u>, 고객번호, 상품번호) 가 있으면, 고객번호는 고객 테이블의 기본키이며, 상품번호는 상품 테이블의 기본키가 될 것입니다. 이와 같은 경우 '고객번호' 와 '상품번호' 가 주문 테이블에서 외래키로 사용된 것입니다.

외래키가 성립하기 위해선 아래 제약조건이 달성되어야 합니다.

- 양쪽 릴레이션의 도메인은 서로 같아야 한다.

- 기본키 값이 변경되면 외래키 값도 변경된다.

- NULL 또는 중복이 허용된다.

- 자기 자신의 기본키를 참조하는 외래키도 가능하다.

- 외래키가 기본키의 일부가 될 수 있다. - (<u>고객번호, 상품번호</u>)



## 무결성 제약조건

데이터베이스의 저장된 데이터의 일관성과 정확성을 지키는 것을 데이터 무결성 (integrity) 라고 합니다.

데이터 무결성이 지켜지지 않은 데이터베이스는 정보의 가치가 떨어지게 됩니다.

데이터 무결성은 데이터의 삽입, 수정, 삭제 시 주로 발생하게 되는데, 응용 프로그램 개발 시 프로그래머가 이를 일일이 처리하면 매우 복잡하기 때문에 DBMS가 알아서 지켜 주게 됩니다. 지키게 되는 법칙을 '무결성 제약조건' 이라고 합니다.



### 도메인 무결성 제약조건

릴레이션 내의 튜플들이 각 속성에 도메인에 지정된 값 만을 가져야 합니다.

예를 들어 전화번호 속성에 날짜나 이름(문자열)이 들어가면 어려움이 따를 것 입니다.

SQL문에서 데이터 타입, 널, 기본값. 제약조건 등으로 지정할 수 있습니다.



#### 삽입, 수정

제약조건에 부합하는지 확인 후 부합하지 않으면 실행을 거부합니다.

#### 삭제

특별한 확인이 필요하지 않으며 바로 삭제한다.



### 개체 무결성 제약조건

기본키는 NULL값을 가져선 안되며, 릴레이션 내에 오직 하나의 값만 존재해야 합니다.

#### 삽입

기본키가 NULL이나 동일한 값이 있는 경우 삽입을 거부하면 됩니다.

#### 수정

기본키가 수정되는 경우, NULL이나 동일한 값이 있는지 체크 후 거부하면 됩니다.

#### 삭제

특별한 확인이 필요하지 않으며 바로 삭제한다. 단. 참조 무결성 제약조건 확인이 필요합니다.



### 참조 무결성 제약조건

자식 릴레이션의 외래키는 부모 릴레이션의 기본키와 도메인이 동일해야 하며, 자식 릴레이션은 부모 릴레이션의 도메인과 다른 값으로 삽입, 수정될 겅우 거부됩니다. 반대로 자식 릴레이션에서 참조하는 값을 부모 릴레이션에서 삭제하려 해도 거부됩니다.



#### 삽입

자식 릴레이션의 값이 부모 릴레이션에 존재하는지 확인합니다. (없으면 거부합니다.)

NULL값을 허용하였다면 NULL인 경우도 허용합니다.

#### 수정

삭제와 삽입 요청이 연속해서 수행됩니다.

두 연산 시 문제가 없으면 실행 완료됩니다.

#### 삭제

자식 릴레이션에서 투플이 삭제되면 부모 릴레이션에 문제가 없으므로 즉시 실행합니다.

부모 릴레이션의 경우, 자식 릴레이션 값을 다음 방법중에 하나로 처리합니다.

- RESTRICTED : 자식 릴레이션에서 참조중인 경우 삭제를 거부함

- CASCADE : 자식 릴레이션에 관련 투플도 함께 삭제함

- DEFAULT : 자식 릴레이션의 관련 투플을 기본 값으로 변경함

- NULL : 자식 릴레이션의 관련 투플을 NULL로 변경함



# 참고 문서

- [[Database] 2. 관계데이터모델 - MangKyu's Diary](https://mangkyu.tistory.com/21)

- 
