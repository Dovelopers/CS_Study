# 데이터베이스 CS 스터디 3주차

데이터베이스 3주차 스터디입니다.

한빛아카데미의 `MySQL로 배우는 데이터베이스 개론과 실습` 책을 기반으로 작성했습니다.

작성자 : YMGYM(안민준)

## 개요

1주차 2주차에서 릴레이션에 대해서 배워 왔고, 이것을 옳게 사용하는 방법(무결성 제약조건 등) 에 대해서 배웠습니다.

이번 단원부터는 릴레이션에서 데이터를 추출하는 방법인 관계 대수에 대해서 배웁니다

## 관계대수

관계 대수란 릴레이션에서 원하는 결과를 얻기 위해 수학의 대수와 비슷한 연산을 이용하여 질의하는 방법을 기술하는 언어입니다.

관계언어는 절차적 언어이며, DBMS 는 관계 대수를 기반으로 해서 연산을 수행합니다.

### 관계의 수학적 의미

#### 수학적 의미로서의 릴레이션

지난 시간에도 말씀드린 바 있지만, 관계 데이터베이스는 집합과 같은 수학적 개념에 기초하고 있습니다.

관계 대수 또한 수학적 개념을 사용하고 있기에 이 부분에 대한 고려가 필요합니다.

이번 단원에서 다루는 내용은 후 단원에서 배울 내용을 일부 포함하고 있으므로, 가볍게 다루고 넘어가도록 하겠습니다.

##### 집합

숫자, 사람, 문자 등 객체의 모임입니다.

A = {2, 4}, B = {1, 3, 5} 와 같이 정의하는 것을 중학교 시절에 배운 바가 있습니다.

##### 카티전 프로덕트

카티전 프로덕트는 두 집합의 원소 순서쌍의 집합입니다.

`A X B` 라고 작성합니다.

즉 앞 상황에서 `A X B = {(2, 1), (2, 3), (2, 5), (4, 1), (4, 3), (4, 5)}` 라고 정의됩니다.

집합 3개 간의 카티전 프로덕트도 가능하며, `A X B X C` 와 같이 작성합니다. (원소는 작성하지 않겠습니다.)

카티전 프로젝트의 원소의 총 경우의 수는 각 집합의 원소의 개수 곱과 같습니다.

예를 들어 `A X B` 의 원소의 개수는 2개 X 3개 인 6개와 같습니다.

##### 릴레이션(집합)

이 때 릴레이션은 카티전 프로덕트의 부분집합으로 정의합니다.

부분집합이란 어떤 집합에서 원소를 일부(또는 전체, 공집합) 떼어 낸 집합을 말합니다.

예를 들어 `R1 = {(2, 1), (4, 1)}` 또는 `R2 = {(2, 3), (4, 1), (4, 5)}` 모두 릴레이션입니다.

##### 도메인

카티전 프로덕트의 기초 집합 각각이 가질 수 있는 값의 범위를 도메인이라고 합니다.

예를 들어 집합 A 의 도메인은 {2, 4} 입니다.

##### 합집합, 교집합

집합에는 합집합 연산도 있습니다.

내용은 중학교 때 배운 연산과 완전히 동일합니다.

`A ∪ B = {1, 2, 3, 4, 5}` 

릴레이션 또한 부분집합이고 즉 집합이기 때문에 릴레이션 끼리 연산도 가능합니다.

`R1 ∪ R2 = {(2, 1), (4, 1), (2, 3), (2, 5)}`

교집합은 공통 분모만 추출합니다.

`A ∩ B = {}`

`R1 ∩ R2 = {(2, 1)}` 

#### 현실 세계의 릴레이션

데이터베이스에서의 릴레이션은 수학적 개념을 현실 세계에 적용한 것이라고 합니다.

대신 현실 세계에서는 수학에서 다루지 않는 다양한 자료형들이 있습니다 (문자열 등)

예를 들어, `학번 = {2, 4}` 와 `과목={"데이터베이스", "자료구조"}` 이 있다고 하면,

`학번 X 과목 = {(2, "데이터베이스"), (2, "자료구조"), (4, "데이터베이스"), (4, "자료구조")}` 로 쓸 수 있습니다.

이 때

| 학번  | 과목     |
| --- | ------ |
| 2   | 데이터베이스 |
| 4   | 자료구조   |

의 경우는 앞 카티전 프로덕트의 부분집합이며, 이를 데이터베이스에서는 `릴레이션` 이라고 부릅니다.

## 관계대수 연산자

연산자란 '피연산자에 적용되는 연산 기호를 말합니다.

관계대수의 연산자는 두 가지로 분류됩니다.

### 순수 관계 연산 (Relational Operation)

관계 데이터 모델을 위해 고안된 연산자입니다.

종류는 아래와 같습니다.

- 셀렉션 - Selection

- 프로젝션 - Projection

- 조인 - join

- 디비전 - division

- 개명 - rename

### 일반 집합 연산 (Set Operation)

수학의 집합이론에서 파생된 연산자입니다.

종류는 아래와 같습니다.

- 합집합 - union

- 차집합 - difference

- 교집합 - intersection

- 카티전 프로덕트 - cartesian product

### 다른 분류법

추가적인 분류방법 또한 존재합니다

- 기본 연산자 - 셀렉션, 프로젝션, 합집합, 차집합, 카티전 프로덕트

- 유도 연산자 - 디비전, 교집합, 조인

## 관계 대수식

관계대수 연산자는 피연산자의 개수에 따라 아래와 같이 분류됩니다.

- 단항 연산자 - 피연산자가 하나임

- 이항 연산자 - 피연산자가 두개임

관계대수 연산을 수행하기 위해 나타낸 식을 '관계대수식' 이라고 하며, 적용 순서는 수학 연산과 동일하게 괄호 안의 식이 우선시되며, 왼쪽에서 오른쪽으로 진행됩니다.

- 단항 연산자 : 연산자<조건> - 릴레이션

- 이항 연산자 : 릴레이션1 - 연산자<조건> - 릴레이션 2

# 연산자 설명

#### 복습

공부에 들어가기 전에 아래 릴레이션을 복습할 필요가 있습니다.

- 차수 : 속성의 개수; 스키마의 열의 수

- 카디날리티 : 투플의 수; 행의 수

### 셀렉션

대상 릴레이션에서 인스턴스의 일부 (투플의 집합)을 반환합니다.

하나의 릴레이션을 대상으로 하는 단항 연산자입니다.

- 결과 릴레이션의 차수 : 대상 릴레이션과 동일

- 카디날리티 : 대상 릴레이션보다 작거나 같다

- 조건 : <속성> = <상수값 또는 속성>

아래 처럼 사용합니다.

`σ <가격 <= 8000> (도서)` 이 연산은 도서 릴레이션에서 가격이 8000원 이하인 도서만 찾아서 추출합니다.

조건이 여러개인 경우 `∧(and)`, `∨(or)`, `¬ (not)` 기호를 이용하여 표시합니다.

예를 들어 가격이 8천원 이하, 도서번호가 3이상인  도서는 `가격 <= 8000 ∧ 도서번호 > 3` 으로 표시합니다.

![](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FwNf1s%2Fbtrq7G8RsyG%2F91EqWjkemjXf9Masz98lh0%2Fimg.png)

출처 : [[문과 코린이의 IT 기록장] MSSQL - 집합 연산자 (관계형 데이터베이스(DBMS) vs 집합, 합집합, 차집합, 교집합, 곱집합, 프로젝션, 셀렉션, 조인/디비전)](https://vansoft1215.tistory.com/229)

### 프로젝션

대상 릴레이션에서 속성을 추출합니다.

단항 연산자입니다.

- 결과 릴레이션의 차수 : 대상 릴레이션의 차수보다 작거나 같습니다.

- 카디날리티 : 대상 릴레이션보다 작거나 같다

아래 처럼 사용합니다.

`𝝿이름, 주소, 핸드폰 (고객)` 이 연산은 고객 릴레이션에서 이름, 주소, 핸드폰 번호만 추출합니다.

![](https://blog.kakaocdn.net/dn/cVfxfT/btrq7H7LbjI/NVGkwoZck5uhkOx5SE1XR1/img.png)

출처 : [[문과 코린이의 IT 기록장] MSSQL - 집합 연산자 (관계형 데이터베이스(DBMS) vs 집합, 합집합, 차집합, 교집합, 곱집합, 프로젝션, 셀렉션, 조인/디비전)](https://vansoft1215.tistory.com/229)

# 참고 자료

- [[문과 코린이의 IT 기록장] MSSQL - 집합 연산자 (관계형 데이터베이스(DBMS) vs 집합, 합집합, 차집합, 교집합, 곱집합, 프로젝션, 셀렉션, 조인/디비전)](https://vansoft1215.tistory.com/229)
